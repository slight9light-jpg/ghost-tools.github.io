<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ - Ghost Tools</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff006e;
            --accent: #00d4ff;
            --dark: #0a0a0a;
            --text: #ffffff;
            --gray: #1a1a1a;
            --border: #222222;
        }

        /* Page base styles (match site.html) */
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: var(--dark);
            color: var(--text);
            overflow-x: hidden;
        }

        /* Header layout (HTML stays in <body>) */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--dark);
            padding: 1rem 2rem;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            text-decoration: none;
            white-space: nowrap;
        }

        .logo img {
            height: 40px;
            border-radius: 6px;
        }

        nav {
            display: flex;
            gap: 2rem;
            list-style: none;
            justify-self: center;
            justify-content: center;
        }

        nav a {
            color: var(--text);
            text-decoration: none;
            font-size: 14px;
            font-weight: 700;
            transition: color 0.3s;
            position: relative;
            text-transform: uppercase;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a.active {
        }

        .balance-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            white-space: nowrap;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .balance {
            font-weight: bold;
            color: #00d4ff;
        }

        .btn-replenish {
            background: linear-gradient(to right, var(--accent), var(--primary));
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-replenish:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        .btn-profile {
            background: linear-gradient(to right, var(--accent), var(--primary));
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-profile:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        main {
            margin-top: 60px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 2rem;
        }

        .catalog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .catalog-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--gray);
            color: var(--text);
            border: 1px solid var(--border);
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: linear-gradient(to right, var(--accent), var(--primary));
            border: none;
            color: var(--dark);
        }

        /* –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .product-card {
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-game {
            display: inline-block;
            background: var(--gray);
            color: var(--accent);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .product-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-description {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            min-height: 40px;
        }

        .product-features {
            list-style: none;
            font-size: 0.85rem;
            color: #999;
            margin-bottom: 1rem;
        }

        .product-features li:before {
            content: "‚úì ";
            color: var(--accent);
            font-weight: bold;
            margin-right: 5px;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-buy {
            background: linear-gradient(to right, var(--accent), var(--primary));
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-buy:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        /* –ü–∞–≥–∏–Ω–∞—Ü–∏—è */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .pagination a,
        .pagination span {
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s;
        }

        .pagination a:hover {
            background: linear-gradient(to right, var(--accent), var(--primary));
            border: none;
            color: var(--dark);
        }

        .pagination span.active {
            background: linear-gradient(to right, var(--accent), var(--primary));
            border: none;
            color: var(--dark);
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            background: var(--dark);
            margin: 10% auto;
            padding: 2rem;
            border: 1px solid var(--border);
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            border-top: 3px solid var(--accent);
        }

        .close {
            color: var(--text);
            float: right;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--accent);
        }

        .modal h2 {
            margin-bottom: 1.5rem;
            color: var(--accent);
        }

        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .modal-form input,
        .modal-form select {
            padding: 12px;
            background: var(--gray);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 8px;
            font-size: 1rem;
        }

        .modal-form input:focus,
        .modal-form select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        .btn-submit {
            background: linear-gradient(to right, var(--accent), var(--primary));
            color: var(--dark);
            border: none;
            padding: 12px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            nav {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .catalog-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header>
        <div class="header-content">
            <a href="index.html" class="logo">
                <img src="logo.jpg" alt="Ghost Tools">
                GHOST TOOLS
            </a>
            <nav class="nav">
                <a href="index.html">–ì–õ–ê–í–ù–ê–Ø</a>
                <a href="catalog.html">–ö–ê–¢–ê–õ–û–ì</a>
                <a href="account.html">–ê–ö–ö–ê–£–ù–¢</a>
            </nav>
            <div class="header-right">
                <div class="balance-container">
                    <span>üí∞</span>
                    <span class="balance" id="balance">0.00 ‚ÇΩ</span>
                </div>
                <button class="btn-replenish" onclick="openReplenishModal()">üí∏–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                <button class="btn-profile" id="headerAuthBtn" onclick="handleHeaderAuth()">üë§–ü—Ä–æ—Ñ–∏–ª—å</button>
            </div>
        </div>
    </header>

    <main>
        <div class="catalog-header">
            <h1>üì¶ –ö–∞—Ç–∞–ª–æ–≥ —á–∏—Ç–æ–≤</h1>
            <div class="filters">
                <button class="filter-btn active" onclick="filterProducts('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="filterProducts('CS2')">CS2</button>
                <button class="filter-btn" onclick="filterProducts('Valorant')">Valorant</button>
                <button class="filter-btn" onclick="filterProducts('Rust')">Rust</button>
                <button class="filter-btn" onclick="filterProducts('PUBG')">PUBG</button>
            </div>
        </div>

        <div class="products-grid" id="productsGrid">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã JS -->
        </div>

        <div class="pagination">
            <span class="active">1</span>
            <a href="#">2</a>
            <a href="#">3</a>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∫—É–ø–∫–∏ -->
    <div id="purchaseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePurchaseModal()">&times;</span>
            <h2 id="modalTitle">–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞</h2>
            <form class="modal-form" onsubmit="completePurchase(event)">
                <input type="email" placeholder="Email" required>
                <input type="text" placeholder="–ù–∏–∫ –≤ –∏–≥—Ä–µ" required>
                <input type="tel" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" required>
                <select required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</option>
                    <option value="yandex">Yandex.Kassa</option>
                    <option value="sberbank">–°–±–µ—Ä–±–∞–Ω–∫</option>
                    <option value="crypto">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</option>
                </select>
                <button type="submit" class="btn-submit">–û–ø–ª–∞—Ç–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div id="replenishModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeReplenishModal()">&times;</span>
            <h2>üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h2>
            <form class="modal-form" onsubmit="replenishBalance(event)">
                <input type="number" id="replenishAmount" placeholder="–°—É–º–º–∞ (‚ÇΩ)" min="100" max="50000" required>
                <select required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</option>
                    <option value="yandex">Yandex.Kassa</option>
                    <option value="sberbank">–°–±–µ—Ä–±–∞–Ω–∫</option>
                    <option value="crypto">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</option>
                </select>
                <button type="submit" class="btn-submit">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
        const products = [
            { id: 1, game: 'CS2', name: 'ESP Full', price: 199, emoji: 'üëÅÔ∏è', features: ['–í—Ä–∞–≥–∏ –Ω–∞ —Å—Ç–µ–Ω–µ', 'HP/–±—Ä–æ–Ω—è', '–û—Ä—É–∂–∏–µ'] },
            { id: 2, game: 'CS2', name: 'Aimbot Pro', price: 299, emoji: 'üéØ', features: ['–ê–≤—Ç–æ–Ω–∞–≤–µ–¥–µ–Ω–∏–µ', '–ü–ª–∞–≤–Ω–æ—Å—Ç—å', '–û–±—Ö–æ–¥ VAC'] },
            { id: 3, game: 'CS2', name: 'Bundle Pro', price: 399, emoji: 'üî•', features: ['ESP + Aimbot', '24/7 –ø–æ–¥–¥–µ—Ä–∂–∫–∞', '–û–±–Ω–æ–≤–ª–µ–Ω–∏—è'] },
            { id: 4, game: 'Valorant', name: 'Valorant ESP', price: 179, emoji: 'üëÅÔ∏è', features: ['–í–∏–¥–∏–º–æ—Å—Ç—å –≤—Ä–∞–≥–æ–≤', '–ú–∏–Ω–∏-—Ä–∞–¥–∞—Ä', '–ê–Ω—Ç–∏–≤—ã—Ä–µ–∑'] },
            { id: 5, game: 'Valorant', name: 'Valorant Aim', price: 249, emoji: 'üéØ', features: ['–¢–æ—á–Ω—ã–π –ø—Ä–∏—Ü–µ–ª', '–î–ª—è Glitch', '–ë—ã—Å—Ç—Ä–æ'] },
            { id: 6, game: 'Valorant', name: 'Ultimate Pack', price: 349, emoji: 'üëë', features: ['–í—Å—ë –≤–∫–ª—é—á–µ–Ω–æ', '–í–ò–ü –ø–æ–¥–¥–µ—Ä–∂–∫–∞', '–ì–∞—Ä–∞–Ω—Ç–∏—è'] },
            { id: 7, game: 'Rust', name: 'Rust Radar', price: 189, emoji: 'üó∫Ô∏è', features: ['–ö–∞—Ä—Ç–∞ –≤—Ä–∞–≥–æ–≤', '–†–∞–¥–∞—Ä –±–∞–∑—ã', '–°–∫—Ä—ã—Ç—ã–π'] },
            { id: 8, game: 'Rust', name: 'Rust Aim', price: 219, emoji: 'üéØ', features: ['–ê–≤—Ç–æ-–ø—Ä–∏—Ü–µ–ª', '–ù–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ', '–ù–µ–∑–∞–º–µ—Ç–Ω–æ'] },
            { id: 9, game: 'Rust', name: 'Rust Mega', price: 299, emoji: 'üíé', features: ['Radar + Aim', '–í–µ—á–Ω—ã–π –¥–æ—Å—Ç—É–ø', '30 –¥–Ω–µ–π –≥–∞—Ä–∞–Ω—Ç'] },
            { id: 10, game: 'PUBG', name: 'PUBG ESP+Aim', price: 229, emoji: 'üì°', features: ['–í—Ä–∞–≥–∏ –≤ –≤–∏–¥—É', '–ê–≤—Ç–æ—Ü–µ–ª—å', '–í —Ç–µ–Ω–∏'] },
            { id: 11, game: 'PUBG', name: 'PUBG Wallhack', price: 199, emoji: 'üëª', features: ['–°–∫–≤–æ–∑—å —Å—Ç–µ–Ω—ã', '–ù–∞ –≤—Å—é –∫–∞—Ä—Ç—É', '–õ–µ–≥–∫–æ'] },
            { id: 12, game: 'PUBG', name: 'PUBG Pro', price: 329, emoji: 'üåü', features: ['–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä', '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', '–ê–≤—Ç–æ–æ–±–Ω–æ–≤'] }
        ];

        let currentFilter = 'all';
        let currentProduct = null;

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';

            const filtered = currentFilter === 'all' 
                ? products 
                : products.filter(p => p.game === currentFilter);

            filtered.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <div class="product-image">${product.emoji}</div>
                    <div class="product-info">
                        <div class="product-game">${product.game}</div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-description">–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –∏–≥—Ä—ã</div>
                        <ul class="product-features">
                            ${product.features.map(f => `<li>${f}</li>`).join('')}
                        </ul>
                        <div class="product-footer">
                            <div class="product-price">${product.price} ‚ÇΩ</div>
                            <button class="btn-buy" onclick="openPurchaseModal(${product.id})">–ö—É–ø–∏—Ç—å</button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
        function filterProducts(game) {
            currentFilter = game;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadProducts();
        }

        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function openPurchaseModal(productId) {
            const product = products.find(p => p.id === productId);
            currentProduct = product;
            document.getElementById('modalTitle').textContent = `–ü–æ–∫—É–ø–∫–∞: ${product.name} (${product.price} ‚ÇΩ)`;
            document.getElementById('purchaseModal').style.display = 'block';
        }

        function closePurchaseModal() {
            document.getElementById('purchaseModal').style.display = 'none';
        }

        function openReplenishModal() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('‚ùå –í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç.');
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('replenishModal').style.display = 'block';
        }

        function closeReplenishModal() {
            document.getElementById('replenishModal').style.display = 'none';
        }

        function completePurchase(event) {
            event.preventDefault();
            alert(`‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É ${currentProduct.name} –∑–∞ ${currentProduct.price} ‚ÇΩ!\n\n–£ –≤–∞—Å –µ—Å—Ç—å 24 —á–∞—Å–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É.`);
            closePurchaseModal();
        }

        function replenishBalance(event) {
            event.preventDefault();
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('‚ùå –í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã');
                window.location.href = 'login.html';
                return;
            }

            const amount = parseFloat(document.getElementById('replenishAmount').value);
            const user = JSON.parse(currentUser);
            
            // –ó–∞–≥—Ä—É–∑–∏–º –ë–î –≤ —Ñ–æ—Ä–º–∞—Ç–µ BD.txt
            let dbString = localStorage.getItem('ghostToolsUsers');
            if (!dbString) {
                const defaultUsers = [
                    'admin admin123 5000.00',
                    'testuser password123 1500.50',
                    'player1 gamer2024 299.99',
                    'pvp_pro secure_pass 0.00',
                    'ghost_hunter mysecret 3200.00'
                ];
                dbString = defaultUsers.join('\n');
                localStorage.setItem('ghostToolsUsers', dbString);
            }

            let lines = dbString.split('\n').filter(line => line.trim());
            lines = lines.map(line => {
                const parts = line.trim().split(' ');
                if (parts.length >= 3 && parts[0] === user.login) {
                    const oldBalance = parseFloat(parts[2]) || 0;
                    const newBalance = oldBalance + amount;
                    return `${parts[0]} ${parts[1]} ${newBalance.toFixed(2)}`;
                }
                return line;
            });
            
            // –ü–æ–ø—Ä–æ–±—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
            const serverUrl = 'http://localhost:3000';
            fetch(serverUrl + '/replenish', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ login: user.login, amount: amount })
            }).then(async resp => {
                if (!resp.ok) throw new Error('server replenish failed');
                const usersResp = await fetch(serverUrl + '/users');
                if (usersResp.ok) {
                    const text = await usersResp.text();
                    localStorage.setItem('ghostToolsUsers', text);
                }
                const dbUsers = parseUsersDatabase(localStorage.getItem('ghostToolsUsers'));
                user.balance = dbUsers[user.login]?.balance || user.balance;
                localStorage.setItem('currentUser', JSON.stringify(user));
                loadBalance();
                alert(`‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} ‚ÇΩ`);
                closeReplenishModal();
                document.getElementById('replenishAmount').value = '';
            }).catch(err => {
                console.warn('replenish server failed, falling back to local', err);
                localStorage.setItem('ghostToolsUsers', lines.join('\n'));
                user.balance = user.balance ? parseFloat(user.balance) + amount : amount;
                localStorage.setItem('currentUser', JSON.stringify(user));
                loadBalance();
                alert(`‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ ${amount} ‚ÇΩ`);
                closeReplenishModal();
                document.getElementById('replenishAmount').value = '';
            });
        }

        function goToAccount() {
            window.location.href = 'account.html';
        }

        function loadBalance() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                document.getElementById('balance').textContent = parseFloat(user.balance || 0).toFixed(2) + ' ‚ÇΩ';
            } else {
                document.getElementById('balance').textContent = '0.00 ‚ÇΩ';
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–µ–π –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
        window.onclick = function(event) {
            const purchaseModal = document.getElementById('purchaseModal');
            const replenishModal = document.getElementById('replenishModal');
            if (event.target == purchaseModal) purchaseModal.style.display = 'none';
            if (event.target == replenishModal) replenishModal.style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadBalance();
        loadProducts();
    </script>
    <script>
        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        (function markActive(){
            try{
                const path = window.location.pathname.split('/').pop() || 'index.html';
                document.querySelectorAll('nav a').forEach(a=>{
                    const href = a.getAttribute('href');
                    if(!href) return;
                    if(href === path || (path === '' && href.includes('index.html')) ) a.classList.add('active');
                });
            }catch(e){/* ignore */}
        })();
    </script>
</body>
</html>